<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Access-Control-Allow-Origin" content="*" />
    <title>Document</title>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.17.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.2/firebase-firestore.js"></script>
    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.17.2/firebase-analytics.js"></script>
    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyCfZ2fg1ZbOVMqgSEcLUyiaA_t1gpJNRE4",
        authDomain: "book-it-7b365.firebaseapp.com",
        databaseURL: "https://book-it-7b365.firebaseio.com",
        projectId: "book-it-7b365",
        storageBucket: "book-it-7b365.appspot.com",
        messagingSenderId: "287985617377",
        appId: "1:287985617377:web:15c02be695e7f3dec36aa0",
        measurementId: "G-Z8MWGLKKCF",
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
      const auth = firebase.auth();
      const db = firebase.firestore();
    </script>
    <script src="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth__ru.js"></script>
    <link
      type="text/css"
      rel="stylesheet"
      href="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.css"
    />
    <script type="text/javascript">
      // FirebaseUI config.
      var uiConfig = {
        signInSuccessUrl: "<https://www.bookit-business.kz/>",
        signInOptions: [
          // Leave the lines as is for the providers you want to offer your users.
          firebase.auth.PhoneAuthProvider.PROVIDER_ID,
        ],
        // tosUrl and privacyPolicyUrl accept either url string or a callback
        // function.
        // Terms of service url/callback.
        tosUrl: "<your-tos-url>",
        // Privacy policy url/callback.
        privacyPolicyUrl: function () {
          window.location.assign("<your-privacy-policy-url>");
        },
      };

      // Initialize the FirebaseUI Widget using Firebase.
      var ui = new firebaseui.auth.AuthUI(firebase.auth());
      // The start method will wait until the DOM is loaded.
      ui.start('#firebaseui-auth-container', {
      signInOptions: [
        {
          provider: firebase.auth.PhoneAuthProvider.PROVIDER_ID,
          // The default selected country.
          defaultCountry: 'KZ'
        }
      ]
    });

      window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier(
        ".submit",
        {
          size: "invisible",
          callback: function (response) {
            // reCAPTCHA solved, allow signInWithPhoneNumber.
            onSignInSubmit();
          },
        }
      );

      var phoneNumber = getPhoneNumberFromUserInput();
      var appVerifier = window.recaptchaVerifier;
      firebase
        .auth()
        .signInWithPhoneNumber(phoneNumber, appVerifier)
        .then(function (confirmationResult) {
          // SMS sent. Prompt user to type the code from the message, then sign the
          // user in with confirmationResult.confirm(code).
          window.confirmationResult = confirmationResult;
        })
        .catch(function (error) {
          // Error; SMS not sent
          // ...
        });
      grecaptcha.reset(window.recaptchaWidgetId);

      // Or, if you haven't stored the widget ID:
      window.recaptchaVerifier.render().then(function (widgetId) {
        grecaptcha.reset(widgetId);
      });
    </script>
    <style>
      button[data-listboxid="44-GB-0"] {
        display: none !important;
      }
    </style>
  </head>
  <body>
    <div id="firebaseui-auth-container"></div>
  </body>
</html>
